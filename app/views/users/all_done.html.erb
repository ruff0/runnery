<% provide(:title, 'All Done') %>
<div class="container">

    <h3> Done: All (

      <% if driver? %>
      <%= current_user.driver_all_done.count %>
      <% else %>
      <%= current_user.restaurant_all_done.count %>
      <% end %>
      )
    </h3> 

      <h4><%= link_to 'Go to: Done Today', done_path %></h4>

<table>
  <thead>
    <tr>
      <% if driver? %>

      <th>From:</th>

      <% else %>

       <th>Driver:</th>

       <% end %>

      <th>Delivered to:</th>
      <th>Time:</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @feed_items.each do |feed_item| %>
      <tr>
        <td><li class="dropdown">

        <a href="#" class="dropdown-toggle" 
            data-toggle="dropdown">

           <% if driver? %>
        <%= feed_item.origin_address %>
        </a>
        <ul class="dropdown-menu">
           <%= feed_item.origin_phone %>

        <% else %>
        <%= feed_item.driver_name %>
        </a>
        <ul class="dropdown-menu">
           <%= feed_item.driver_phone %>
        <% end %>

        </ul>

      </li></td>
        


        <td><li class="dropdown">

        <a href="#" class="dropdown-toggle" 
            data-toggle="dropdown">

        <%= feed_item.address %>
        </a>
        <ul class="dropdown-menu">
           <%= feed_item.phone %>

        </ul>

      </li></td>


        <td><%= feed_item.created_at %></td>

    <% if !feed_item.redeemed? %>
        <% if driver? %>

        <% if feed_item.receipt? %>

            <td><%= form_for feed_item do |f| %>
     

               <%= f.hidden_field :redeemed, :value => true %>
                <%= f.submit "Receipt!", 
                      class: "btn-small btn-warning" %></td> 
        <% end %>
        <% end %>
      <% end %>
      <% end %>
        
      </tr>
    <% end %>
  </tbody>
</table>
</div>